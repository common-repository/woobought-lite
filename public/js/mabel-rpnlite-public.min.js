var mabel_rpn_docCookies={getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,n,o,t,i,r){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var a="";if(o)switch(o.constructor){case Number:a=1/0===o?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+o;break;case String:a="; expires="+o;break;case Date:a="; expires="+o.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(n)+a+(i?";samesite=lax; domain="+i:";samesite=lax")+(t?"; path="+t:"")+(r?"; secure":""),!0}};jQuery(document).ready(function(){!function(e){function n(){jQuery.post(window.mabelrpnsettings.ajaxurl,{action:"mabel-rpnlite-getnew-purchased-products"},function(n){n=e.parseJSON(n),r=n,r&&r.reverse(),e.event.trigger("mabel-rpnlite-products-fetched"),a=!1})}if(0!=window.mabelrpnsettings.mabelrpnrun&&!mabel_rpn_docCookies.getItem("mabel-rpnlite-hide")){var o=window.mabelrpnsettings;if(o){o=o;var t,i,r=[],a=!0,c=a?mabel_rpn_docCookies.getItem("mabel-rpnlite-time")||15:o.notificationdelay;RpnToast.options.timeOut=1e3*parseInt(10),RpnToast.options.newestOnTop=!1,RpnToast.options.layout={imageplace:o.boxlayout,boxplace:o.boxplacement},RpnToast.options.design={bgcolor:0===o.boxbgcolor.indexOf("#")?o.boxbgcolor:"#"+o.boxbgcolor,color:0===o.textcolor.indexOf("#")?o.textcolor:"#"+o.textcolor};var s=function(e){c=o.notificationdelay;var r=l(mabel_rpn_docCookies.getItem("mabel-rpnlite-last"));if(!r)return clearInterval(t),clearInterval(i),void n();RpnToast.show({productinfo:r,translations:o.rpntranslations,optionsOverride:{onclick:function(){window.location=r.url}}}),"function"==typeof e&&e()};e(document).on("mabel-rpnlite-products-fetched",function(e){setTimeout(function(){s(function(){t=setInterval(s,1e3*c)})},1e3*parseInt(c)),i=setInterval(function(){mabel_rpn_docCookies.setItem("mabel-rpnlite-time",--c,void 0,"/")},1e3)}),e(document).on("destroy-rpnToast",function(e){mabel_rpn_docCookies.setItem("mabel-rpnlite-hide",!0,864e3,"/"),clearInterval(t),clearInterval(i),RpnToast.clear({force:!0})});var l=function(e){if(!r||!r.length)return!1;var n=r[0];if(e)for(var o=0;o<r.length;o++)if(r[o].id==e){if(o===r.length-1)return!1;n=r[o+1]}return mabel_rpn_docCookies.setItem("mabel-rpnlite-last",n.id,864e3,"/"),n};n()}}}(jQuery)}),window.RpnToast=function(e){return function(){function n(n){return n||(n=s()),u=e("#"+p+"wrapper"),u.length?u:(u=e("<div/>").attr("id",p+"wrapper").addClass(p+(n.layout.boxplace||"bottom-left")),u.appendTo(e(n.target)),u)}function o(e){return c({product:e.productinfo,translations:e.translations,optionsOverride:e.optionsOverride})}function t(e){i(s(),e)}function i(n,o){for(var t=u.children(),i=t.length-1;i>=0;i--)r(e(t[i]),n,o)}function r(n,o,t){var i=!(!t||!t.force)&&t.force;return!(!n||!i&&0!==e(":focus",n).length)&&(n[o.hideMethod]({duration:o.hideDuration,easing:o.hideEasing,complete:function(){l(n)}}),!0)}function a(){return{tapToDismiss:!1,closeButton:!0,showMethod:"fadeIn",showDuration:350,showEasing:"swing",hideMethod:"fadeOut",hideDuration:250,hideEasing:"swing",onHidden:void 0,onShown:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1500,timeOut:0,target:"body",newestOnTop:!1}}function c(o){function t(){b.newestOnTop?u.prepend(w):u.append(w)}function i(e){return e.replace("{{first_name}}",o.product.buyer.name).replace("{{city}}",o.product.buyer.city).replace("{{state}}",o.product.buyer.state).replace("{{country}}",o.product.buyer.country).replace("{{product_name}}",o.product.name).replace("{{price}}",o.product.price)}function r(){o.product.name&&k.append(e("<h4>"+o.product.name+"</h4>").css("color",b.design.color||"black")),o.translations.message&&(k.append(i(o.translations.message)).addClass(p+"message"),w.append(k.css("color",b.design.color||"black"))),k.append(x)}function a(){o.product.image&&"noimage"!==b.layout.imageplace&&(T.addClass(p+"image-wrapper").css("background-image","url("+o.product.image+")"),"imageright"===b.layout.imageplace?w.append(T):w.prepend(T))}function c(){b.closeButton&&w.append(y.addClass(p+"close"))}function m(n){var o=n&&!1!==b.closeMethod?b.closeMethod:b.hideMethod,t=n&&!1!==b.closeDuration?b.closeDuration:b.hideDuration,i=n&&!1!==b.closeEasing?b.closeEasing:b.hideEasing;if(!e(":focus",w).length||n)return w[o]({duration:t,easing:i,complete:function(){l(w),clearTimeout(h),b.onHidden&&b.onHidden()}})}function g(){(b.timeOut>0||b.extendedTimeOut>0)&&(h=setTimeout(m,b.extendedTimeOut))}function f(){clearTimeout(h),w.stop(!0,!0)[b.showMethod]({duration:b.showDuration,easing:b.showEasing})}var b=s();void 0!==o.optionsOverride&&(b=e.extend(b,o.optionsOverride)),d++,u=n(b);var h=null,v=p+b.layout.imageplace+" "+p+"small",w=e("<div/>").css("background-color",b.design.bgcolor||"white").addClass(v),k=e('<div class="message-wrapper"/>'),x=e('<span class="mabel-rpn-hide">').html(e('<a href="#" class="rpn-disable-btn">'+o.translations.disable+"</a></span>").css("color",b.design.color||"black")),T=e('<div class="image-wrapper"/>'),y=e('<a href="#">&times;</a>').css("color",b.design.color||"black");return function(){r(),a(),c(),t()}(),function(){w.hide(),w[b.showMethod]({duration:b.showDuration,easing:b.showEasing,complete:b.onShown}),b.timeOut>0&&(h=setTimeout(m,b.timeOut))}(),function(){b.closeOnHover&&w.hover(f,g),!b.onclick&&b.tapToDismiss&&w.click(m),b.closeButton&&y&&y.click(function(e){e.preventDefault(),e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),b.onCloseClick&&b.onCloseClick(e),m(!0)}),x.click(function(n){n.preventDefault(),event.stopPropagation?event.stopPropagation():void 0!==event.cancelBubble&&!0!==event.cancelBubble&&(event.cancelBubble=!0),clearTimeout(h),e.event.trigger("destroy-rpnToast")}),b.onclick&&w.click(function(e){b.onclick(e),m()})}(),w}function s(){return e.extend({},a(),m.options)}function l(e){u||(u=n()),e.is(":visible")||(e.remove(),e=null,0===u.children().length&&u.remove())}var u,p="mabel-rpn-",d=0,m={clear:t,getContainer:n,show:o,options:{}};return m}()}(jQuery);